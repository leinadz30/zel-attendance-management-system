"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2080],{2080:(W,h,i)=>{i.r(h),i.d(h,{HomePageModule:()=>p});var g=i(6895),r=i(603),v=i(4006),f=i(9773),l=i(5861),x=i(7719),P=i(5439),C=i(2340),M=i(8086),t=i(4650),O=i(263),_=i(433),y=i(4982),S=i(1645),Z=i(3746),T=i(7559),b=i(9709),A=i(3013),w=i(7956);const U=["moodModal"];function N(s,e){1&s&&(t.TgZ(0,"div",7)(1,"h1"),t._uU(2,"Today's activity"),t.qZA()())}function Y(s,e){if(1&s){const n=t.EpF();t.TgZ(0,"div",18)(1,"ion-card",19)(2,"ion-card-content")(3,"ion-item",20),t.NdJ("click",function(){const c=t.CHM(n).$implicit,u=t.oxw(3);return t.KtG(u.onShowStudentDetails(c))}),t.TgZ(4,"ion-avatar",21),t._UZ(5,"img",22),t.qZA(),t.TgZ(6,"ion-label")(7,"h1")(8,"strong"),t._uU(9),t.qZA()()()(),t.TgZ(10,"h2"),t._uU(11,"Arrived: "),t.TgZ(12,"strong"),t._uU(13),t.qZA()(),t.TgZ(14,"h2"),t._uU(15,"Status: "),t.TgZ(16,"strong"),t._uU(17),t.qZA()()()()()}if(2&s){const n=e.$implicit;t.xp6(5),t.MGl("alt","",n.fullName,"'s profile"),t.xp6(4),t.Oqu(n.fullName),t.xp6(4),t.hij(" ",n.arrivedTime,""),t.xp6(4),t.AsE("","LOG IN"===n.status?"TAP IN":"TAP OUT"," - ",n.recentTapTime,"")}}function L(s,e){if(1&s&&(t.ynx(0),t.YNc(1,Y,18,5,"div",17),t.BQk()),2&s){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.myStudents)}}function H(s,e){if(1&s&&(t.ynx(0),t.YNc(1,L,2,1,"ng-container",14),t.BQk()),2&s){const n=t.oxw(),o=t.MAs(25);t.xp6(1),t.Q6J("ngIf",n.myStudents.length>0)("ngIfElse",o)}}function J(s,e){1&s&&(t.TgZ(0,"div",23),t._UZ(1,"ion-icon",24),t.TgZ(2,"h1"),t._uU(3,"No Tap activity for today"),t.qZA()())}function R(s,e){1&s&&(t.TgZ(0,"div",18)(1,"ion-card",19)(2,"ion-card-content")(3,"ion-item",25)(4,"ion-avatar",21),t._UZ(5,"img",26),t.qZA(),t.TgZ(6,"ion-label")(7,"h1")(8,"strong"),t._UZ(9,"ion-skeleton-text",27),t.qZA()()()(),t.TgZ(10,"h2"),t._UZ(11,"ion-skeleton-text",28),t.qZA(),t.TgZ(12,"h2"),t._UZ(13,"ion-skeleton-text",28),t.qZA()()()()),2&s&&(t.xp6(3),t.Q6J("button",!1)("detail",!1),t.xp6(6),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0))}class d{platform;router;authService;tapLogsService;studentsService;modalCtrl;actionSheetController;notificationService;storageService;alertController;animationService;appConfigService;parentsService;pageLoaderService;isLoading=!1;currentUser;myStudents=[];moodModal;ionRefresher;constructor(e,n,o,a,c,u,Q,j,B,E,F,z,G,k){this.platform=e,this.router=n,this.authService=o,this.tapLogsService=a,this.studentsService=c,this.modalCtrl=u,this.actionSheetController=Q,this.notificationService=j,this.storageService=B,this.alertController=E,this.animationService=F,this.appConfigService=z,this.parentsService=G,this.pageLoaderService=k,this.currentUser=this.storageService.getLoginUser(),this.isAuthenticated&&this.initStudents()}get today(){return new Date}get env(){return C.N.production?"PROD":"DEV"}get isAuthenticated(){const e=this.storageService.getLoginUser();return e&&e?.parentCode&&e?.user&&e?.user?.userId}get user(){return this.storageService.getLoginUser()}get totalUnreadNotification(){const e=this.storageService.getTotalUnreadNotif();return e&&!isNaN(Number(e))?Number(e):0}initDashboard(){return(0,l.Z)(function*(){})()}ngOnInit(){}onShowSettings(){var e=this;return(0,l.Z)(function*(){e.isAuthenticated||e.authService.logout();let n=null;n=yield e.modalCtrl.create({component:x.N,cssClass:"modal-fullscreen",backdropDismiss:!1,canDismiss:!0,enterAnimation:e.animationService.pushRightAnimation,leaveAnimation:e.animationService.leavePushRightAnimation,componentProps:{modal:n}}),n.present(),n.onDidDismiss().then(o=>{e.currentUser=e.storageService.getLoginUser()})})()}initStudents(){var e=this;return(0,l.Z)(function*(){e.isLoading=!0;const n=e.storageService.getLoginUser(),o=yield e.tapLogsService.getStudentsTapsByParentCode(n.parentCode,{date:P().format("YYYY-MM-DD")}).toPromise();e.myStudents=o.data,e.isLoading=!1,console.log(e.myStudents),e.ionRefresher&&e.ionRefresher.complete()})()}onShowStudentDetails(e){var n=this;return(0,l.Z)(function*(){n.isAuthenticated||n.authService.logout(),yield n.pageLoaderService.open("Loading please wait...");const o=yield n.studentsService.getByCode(e.studentCode).toPromise();yield n.pageLoaderService.close();let a=null;const c=n.storageService.getLoginUser();a=yield n.modalCtrl.create({component:M.M,cssClass:"modal-fullscreen",backdropDismiss:!1,canDismiss:!0,enterAnimation:n.animationService.flyUpAnimation,leaveAnimation:n.animationService.leaveFlyUpAnimation,componentProps:{modal:a,currentUser:c,details:o.data}}),a.present()})()}ionViewWillEnter(){console.log("visited")}doRefresh(){var e=this;return(0,l.Z)(function*(){try{if(e.isLoading)return;e.myStudents=[],yield e.initStudents()}catch{yield e.presentAlert({header:"Try again!",message:"Error loading",buttons:["OK"]}),e.ionRefresher&&e.ionRefresher.complete()}})()}profilePicErrorHandler(e,n){e.target.src="../../../assets/img/profile-not-found.svg"}presentAlert(e){var n=this;return(0,l.Z)(function*(){yield(yield n.alertController.create(e)).present()})()}static \u0275fac=function(n){return new(n||d)(t.Y36(r.t4),t.Y36(f.F0),t.Y36(O.e),t.Y36(_.a),t.Y36(y.q),t.Y36(r.IN),t.Y36(r.BX),t.Y36(S.g),t.Y36(Z.V),t.Y36(r.Br),t.Y36(T.Y),t.Y36(b._),t.Y36(A.l),t.Y36(w.p))};static \u0275cmp=t.Xpm({type:d,selectors:[["app-home"]],viewQuery:function(n,o){if(1&n&&(t.Gf(U,5),t.Gf(r.nJ,5)),2&n){let a;t.iGM(a=t.CRH())&&(o.moodModal=a.first),t.iGM(a=t.CRH())&&(o.ionRefresher=a.first)}},decls:28,vars:9,consts:[["mode","md"],["slot","fixed",1,"refresher-custom",3,"ionRefresh"],[1,"content"],[1,"col","welcome"],[1,"label"],[1,"row","name"],[2,"opacity","0.9"],[1,"title"],["slot","start",2,"width","70px","height","70px",3,"click"],["alt","Silhouette of a person's head",3,"src","error"],[1,"row","description"],[1,"dashboard","ion-padding"],["class","title",4,"ngIf"],[1,"students"],[4,"ngIf","ngIfElse"],["noTapTemplate",""],["loadingTemplate",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["mode","ios",1,"student-card"],["button","","lines","none",3,"click"],["slot","start",2,"width","70px","height","70px"],["src","https://ionicframework.com/docs/img/demos/avatar.svg",3,"alt"],[1,"no-tap-result"],["name","time-outline"],["lines","none",3,"button","detail"],["alt","temp profile","src","https://ionicframework.com/docs/img/demos/avatar.svg"],[2,"height","50px",3,"animated"],[2,"height","30px",3,"animated"]],template:function(n,o){if(1&n&&(t.TgZ(0,"ion-content",0)(1,"ion-refresher",1),t.NdJ("ionRefresh",function(){return o.doRefresh()}),t._UZ(2,"ion-refresher-content"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h1",6),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"h1",7),t._uU(11),t.qZA()(),t.TgZ(12,"ion-avatar",8),t.NdJ("click",function(){return o.onShowSettings()}),t.TgZ(13,"img",9),t.NdJ("error",function(c){return o.profilePicErrorHandler(c)}),t.qZA()()(),t.TgZ(14,"div",10)(15,"h1"),t._uU(16,"Let's track your student's activity today."),t.qZA()()(),t._UZ(17,"br"),t.TgZ(18,"div",11)(19,"div",2),t.YNc(20,N,3,0,"div",12),t._UZ(21,"br"),t.TgZ(22,"div",13),t.YNc(23,H,2,2,"ng-container",14),t.qZA()()()(),t.YNc(24,J,4,0,"ng-template",null,15,t.W1O),t.YNc(26,R,14,5,"ng-template",null,16,t.W1O),t.qZA()),2&n){const a=t.MAs(27);t.xp6(8),t.Oqu(t.xi3(9,6,o.today,"MMM dd")),t.xp6(3),t.hij("Hey, ",o.user.fullName,"!"),t.xp6(2),t.Q6J("src",null==o.currentUser?null:o.currentUser.userProfilePic,t.LSH),t.xp6(7),t.Q6J("ngIf",o.myStudents.length>0),t.xp6(3),t.Q6J("ngIf",!o.isLoading)("ngIfElse",a)}},dependencies:[g.sg,g.O5,r.BJ,r.PM,r.FN,r.W2,r.gu,r.Ie,r.Q$,r.nJ,r.Wo,r.CK,g.uU],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], span[_ngcontent-%COMP%], p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin:0}ion-header[_ngcontent-%COMP%]     .profile-toolbar{padding:10px;box-sizing:border-box;height:64px;width:64px}ion-header[_ngcontent-%COMP%]     .profile-toolbar ion-avatar{width:100%;height:100%}ion-header[_ngcontent-%COMP%]     .profile-toolbar ion-avatar img{object-position:center;object-fit:contain;box-shadow:0 0 10px #7a7a7a75;border-radius:100%;display:flex;flex-direction:column;overflow:hidden;width:100%;height:100%}ion-header[_ngcontent-%COMP%]:after{background-image:none}  ion-footer ion-toolbar   .footer-controls{width:100%;margin-right:10px}  ion-footer ion-toolbar   .profile-toolbar{box-sizing:border-box;height:48px;min-width:48px}  ion-footer ion-toolbar   .profile-toolbar ion-avatar{width:100%;height:100%}  ion-footer ion-toolbar   .profile-toolbar ion-avatar img{object-position:center;object-fit:contain;box-shadow:0 0 10px #7a7a7a75;border-radius:100%;display:flex;flex-direction:column;overflow:hidden;width:100%;height:100%}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-grow:1}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]{z-index:1;flex-grow:1;display:flex;flex-direction:column;row-gap:11px;padding:50px 40px 40px;background-color:var(--ion-color-primary);color:#fff;border-bottom-left-radius:50px;border-bottom-right-radius:50px;box-shadow:#00000045 0 4px 4px;position:sticky;top:0!important}.content[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;flex-direction:row}.content[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.content[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff;letter-spacing:0px;line-height:1.2;margin:0}.content[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:30px}.content[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{min-width:80px!important;min-height:80px!important}.content[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start}.content[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-weight:100!important;margin:0;color:#fff;letter-spacing:0px;line-height:1.2;opacity:.9}.content[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]{background-color:#fff;position:relative;z-index:99}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:30px!important;flex-grow:1}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;width:100%!important;flex-direction:column}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]     .student-card{margin:0!important;border-radius:20px!important}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]     .student-card   ion-item::part(native){padding:0!important}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]     .student-card   ion-item ion-label{display:flex;flex-direction:column;gap:5px!important;white-space:break-spaces!important}.content[_ngcontent-%COMP%]   .no-tap-result[_ngcontent-%COMP%]{display:flex;width:100%;padding:20px;align-items:center;justify-content:center;background:rgba(236,239,241,.5803921569);border-radius:10px;flex-direction:column;row-gap:5px!important}.content[_ngcontent-%COMP%]   .no-tap-result[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3rem!important}"]})}const D=[{path:"",component:d}];class m{static \u0275fac=function(n){return new(n||m)};static \u0275mod=t.oAB({type:m});static \u0275inj=t.cJS({imports:[f.Bz.forChild(D),f.Bz]})}var I=i(9544);class p{static \u0275fac=function(n){return new(n||p)};static \u0275mod=t.oAB({type:p});static \u0275inj=t.cJS({imports:[g.ez,v.u5,r.Pc,m,I.q]})}}}]);