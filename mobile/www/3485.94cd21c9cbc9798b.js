"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{5925:(R,C,r)=>{r.d(C,{K:()=>u});var d=r(4650);class u{transform(h,P){(!h||null==h)&&(h="");const p=/(?!^)[\s\S](?!$)/g;return h?.trim().split(" ").map(m=>m.length>4?m.substring(0,1)+m.slice(1).replace(p,"*"):4===m.length?m.substring(0,1)+"***":3===m.length?m.substring(0,1)+"**":2===m.length?m.substring(0,1)+"*":m.replace(p,"*")).join(" ")}static \u0275fac=function(P){return new(P||u)};static \u0275pipe=d.Yjl({name:"censored",type:u,pure:!0})}},3013:(R,C,r)=>{r.d(C,{l:()=>m});var d=r(1086),u=r(2868),e=r(7221),h=r(2340),P=r(4650),p=r(529),x=r(9709);class m{http;appconfig;constructor(g,S){this.http=g,this.appconfig=S}getByAdvanceSearch(g){return this.http.post(h.N.apiBaseUrl+this.appconfig.config.apiEndPoints.parents.getByAdvanceSearch,g).pipe((0,u.b)(S=>this.log("parents")),(0,e.K)(this.handleError("parents",[])))}getByCode(g){return this.http.get(h.N.apiBaseUrl+this.appconfig.config.apiEndPoints.parents.getByCode+g).pipe((0,u.b)(S=>this.log("parents")),(0,e.K)(this.handleError("parents",[])))}create(g){return this.http.post(h.N.apiBaseUrl+this.appconfig.config.apiEndPoints.parents.create,g).pipe((0,u.b)(S=>this.log("parents")),(0,e.K)(this.handleError("parents",[])))}updateProfile(g,S){return this.http.put(h.N.apiBaseUrl+this.appconfig.config.apiEndPoints.parents.updateProfile+g,S).pipe((0,u.b)(M=>this.log("parents")),(0,e.K)(this.handleError("parents",[])))}resetPassword(g,S){return this.http.put(h.N.apiBaseUrl+this.appconfig.config.apiEndPoints.parents.resetPassword+g,S).pipe((0,u.b)(M=>this.log("parents")),(0,e.K)(this.handleError("parents",[])))}updateProfilePicture(g,S){return this.http.put(h.N.apiBaseUrl+this.appconfig.config.apiEndPoints.parents.updateProfilePicture+g,S).pipe((0,u.b)(M=>this.log("parents")),(0,e.K)(this.handleError("parents",[])))}delete(g){return this.http.delete(h.N.apiBaseUrl+this.appconfig.config.apiEndPoints.parents.delete+g).pipe((0,u.b)(S=>this.log("parents")),(0,e.K)(this.handleError("parents",[])))}handleError(g="operation",S){return M=>(this.log(`${g} failed: ${Array.isArray(M.error.message)?M.error.message[0]:M.error.message}`),(0,d.of)(M.error))}log(g){console.log(g)}static \u0275fac=function(S){return new(S||m)(P.LFG(p.eN),P.LFG(x._))};static \u0275prov=P.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}},9664:(R,C,r)=>{r.d(C,{H:()=>T});var d=r(5861),u=r(4006),e=r(4650),h=r(3013),P=r(5925),p=r(603),x=r(7956),m=r(263),n=r(4396),g=r(4982),S=r(5295),M=r(7559),q=r(3746),b=r(6895),A=r(9549),U=r(4144);const L=["searchSchoolCodeModal"],k=["searchStudentIdModal"];function O(l,t){if(1&l&&(e.TgZ(0,"div",25)(1,"h2")(2,"strong"),e._uU(3),e.qZA()()()),2&l){const o=e.oxw();e.xp6(3),e.Oqu(o.selectedSchool.orgSchoolCode)}}function D(l,t){1&l&&(e.TgZ(0,"h2",26),e._uU(1,"*Enter school code"),e.qZA())}function y(l,t){1&l&&e._UZ(0,"ion-icon",27)}function N(l,t){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&l){const o=e.oxw(2);e.xp6(1),e.Oqu((o.orgSchoolCode.errors&&o.orgSchoolCode.errors.required?"Please enter school code":"")||(o.orgSchoolCode.errors&&o.orgSchoolCode.errors.notFound?"School not found":""))}}function Z(l,t){if(1&l){const o=e.EpF();e.TgZ(0,"div",28)(1,"div",29)(2,"mat-form-field",30)(3,"mat-label"),e._uU(4,"School Code"),e.qZA(),e._UZ(5,"input",31),e.YNc(6,N,2,1,"mat-error",24),e.qZA()(),e.TgZ(7,"ion-button",32),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.onSearchSchool())}),e._uU(8," Confirm "),e.qZA()()}if(2&l){const o=e.oxw();e.xp6(5),e.Q6J("formControl",o.orgSchoolCode),e.xp6(1),e.Q6J("ngIf",void 0!==o.orgSchoolCode.errors),e.xp6(1),e.Q6J("disabled",o.isSubmitting||o.orgSchoolCode.invalid)}}function f(l,t){if(1&l&&(e.TgZ(0,"div",25)(1,"h2"),e._uU(2),e.qZA()()),2&l){const o=e.oxw(2);e.xp6(2),e.Oqu(o.selectedStudent.orgStudentId)}}function s(l,t){1&l&&(e.TgZ(0,"h2",14)(1,"strong"),e._uU(2,"Student Name"),e.qZA()())}function i(l,t){if(1&l&&(e.TgZ(0,"div",25)(1,"h2")(2,"strong"),e._uU(3),e.ALo(4,"censored"),e.qZA()()()),2&l){const o=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,1,o.selectedStudent.fullName))}}function _(l,t){1&l&&(e.TgZ(0,"h2",26),e._uU(1,"*Enter student ID"),e.qZA())}function v(l,t){1&l&&e._UZ(0,"ion-icon",27)}function E(l,t){if(1&l){const o=e.EpF();e.TgZ(0,"ion-card",11)(1,"ion-card-content")(2,"ion-item",12),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.onShowSearchStudents())}),e.TgZ(3,"ion-label")(4,"div",13)(5,"h2",14)(6,"strong"),e._uU(7,"Student ID"),e.qZA()(),e.YNc(8,f,3,1,"div",15),e.YNc(9,s,3,0,"h2",33),e.YNc(10,i,5,3,"div",34),e.YNc(11,_,2,0,"ng-template",null,35,e.W1O),e.qZA()(),e.YNc(13,v,1,0,"ion-icon",17),e.qZA()()()}if(2&l){const o=e.MAs(12),a=e.oxw();e.xp6(8),e.Q6J("ngIf",a.selectedStudent&&(null==a.selectedStudent?null:a.selectedStudent.studentId))("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",a.selectedStudent&&(null==a.selectedStudent?null:a.selectedStudent.studentId)),e.xp6(1),e.Q6J("ngIf",a.selectedStudent&&(null==a.selectedStudent?null:a.selectedStudent.studentId)),e.xp6(3),e.Q6J("ngIf",a.selectedStudent&&(null==a.selectedStudent?null:a.selectedStudent.studentId))}}function I(l,t){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&l){const o=e.oxw(2);e.xp6(1),e.Oqu((o.orgStudentId.errors&&o.orgStudentId.errors.required?"Please enter student id":"")||(o.orgStudentId.errors&&o.orgStudentId.errors.notFound?"Student not found":""))}}function B(l,t){if(1&l){const o=e.EpF();e.TgZ(0,"div",28)(1,"div",29)(2,"mat-form-field",30)(3,"mat-label"),e._uU(4,"Student Id"),e.qZA(),e._UZ(5,"input",36),e.YNc(6,I,2,1,"mat-error",24),e.qZA()(),e.TgZ(7,"ion-button",32),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.onSearchStudent())}),e._uU(8," Confirm "),e.qZA()()}if(2&l){const o=e.oxw();e.xp6(5),e.Q6J("formControl",o.orgStudentId),e.xp6(1),e.Q6J("ngIf",void 0!==o.orgStudentId.errors),e.xp6(1),e.Q6J("disabled",o.isSubmitting||o.orgStudentId.invalid)}}function Y(l,t){1&l&&e._UZ(0,"ion-icon",44)}function J(l,t){1&l&&e._UZ(0,"ion-icon",45)}function K(l,t){if(1&l){const o=e.EpF();e.TgZ(0,"ion-button",46),e.NdJ("click",function(){e.CHM(o);const c=e.oxw(2);return e.KtG(c.requestResultModal.done())}),e._uU(1," Done "),e.qZA()}}function Q(l,t){if(1&l){const o=e.EpF();e.TgZ(0,"ion-button",47),e.NdJ("click",function(){e.CHM(o);const c=e.oxw(2);return e.KtG(c.requestResultModal.retry())}),e._uU(1," Retry "),e.qZA()}}function W(l,t){if(1&l&&(e.TgZ(0,"div",37),e.YNc(1,Y,1,0,"ion-icon",38),e.YNc(2,J,1,0,"ng-template",null,39,e.W1O),e.TgZ(4,"div",14)(5,"h1"),e._uU(6),e.qZA()(),e.TgZ(7,"div",40)(8,"h1"),e._uU(9),e.qZA()(),e.TgZ(10,"div",41),e.YNc(11,K,2,0,"ion-button",42),e.YNc(12,Q,2,0,"ng-template",null,43,e.W1O),e.qZA()()),2&l){const o=e.MAs(3),a=e.MAs(13),c=e.oxw();e.xp6(1),e.Q6J("ngIf","success"===(null==c.requestResultModal?null:c.requestResultModal.type))("ngIfElse",o),e.xp6(5),e.Oqu(null==c.requestResultModal?null:c.requestResultModal.title),e.xp6(3),e.Oqu(null==c.requestResultModal?null:c.requestResultModal.desc),e.xp6(2),e.Q6J("ngIf","success"===(null==c.requestResultModal?null:c.requestResultModal.type))("ngIfElse",a)}}function F(l,t){if(1&l){const o=e.EpF();e.TgZ(0,"ion-footer")(1,"ion-toolbar",1)(2,"ion-button",32),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.onSubmit())}),e._uU(3," Submit "),e.qZA()()()}if(2&l){const o=e.oxw();e.xp6(2),e.Q6J("disabled",o.isSubmitting)}}const w=function(){return[0,1]};class T{parentsService;censoredStringPipe;formBuilder;alertController;actionSheetController;pageLoaderService;authService;schoolsService;studentsService;linkStudentRequestService;modalCtrl;animationService;storageService;modal;currentUser;linkStudentRequestForm;selectedSchool;selectedStudent;activeAditionalBackdrop=!1;isSubmitting=!1;isOpenRequestResultModal=!1;requestResultModal;orgSchoolCode=new u.NI(null,[u.kI.required]);orgStudentId=new u.NI(null,[u.kI.required]);searchSchoolCodeModal;searchStudentIdModal;constructor(t,o,a,c,G,z,j,H,V,$,X,ee,te){this.parentsService=t,this.censoredStringPipe=o,this.formBuilder=a,this.alertController=c,this.actionSheetController=G,this.pageLoaderService=z,this.authService=j,this.schoolsService=H,this.studentsService=V,this.linkStudentRequestService=$,this.modalCtrl=X,this.animationService=ee,this.storageService=te,this.currentUser=this.storageService.getLoginUser()}get valid(){return this.selectedSchool&&this.selectedSchool.schoolId&&this.selectedStudent&&this.selectedStudent.studentId}get isAuthenticated(){const t=this.storageService.getLoginUser();return t&&t?.parentCode&&t?.user&&t?.user?.userId}ngOnInit(){}onShowSearchSchool(){var t=this;return(0,d.Z)(function*(){t.isAuthenticated||t.authService.logout(),t.searchSchoolCodeModal&&(t.orgSchoolCode.markAsUntouched(),t.orgSchoolCode.markAsPristine(),t.orgSchoolCode.updateValueAndValidity(),t.searchSchoolCodeModal.present())})()}onSearchSchool(){var t=this;return(0,d.Z)(function*(){try{yield t.pageLoaderService.open("Checking please wait..."),t.isSubmitting=!0;const o=yield t.schoolsService.getByOrgCode(t.orgSchoolCode.value).toPromise();t.isSubmitting=!1,o.data&&o.data?.schoolCode?(t.selectedSchool=o.data,t.orgSchoolCode.setErrors(null),t.orgSchoolCode.markAsPristine(),t.orgSchoolCode.updateValueAndValidity(),t.searchSchoolCodeModal.dismiss()):t.orgSchoolCode.setErrors({notFound:!0}),yield t.pageLoaderService.close()}catch{t.isSubmitting=!1,yield t.pageLoaderService.close()}})()}onShowSearchStudents(){var t=this;return(0,d.Z)(function*(){t.isAuthenticated||t.authService.logout(),t.searchStudentIdModal&&(t.orgStudentId.markAsUntouched(),t.orgStudentId.markAsPristine(),t.orgStudentId.updateValueAndValidity(),t.searchStudentIdModal.present())})()}onSearchStudent(){var t=this;return(0,d.Z)(function*(){try{yield t.pageLoaderService.open("Checking please wait..."),t.isSubmitting=!0;const o=yield t.studentsService.getByOrgStudentId(t.orgStudentId.value).toPromise();t.isSubmitting=!1,o.data&&o.data?.studentCode?(t.selectedStudent=o.data,t.orgStudentId.setErrors(null),t.orgStudentId.markAsPristine(),t.orgStudentId.updateValueAndValidity(),t.searchStudentIdModal.dismiss()):t.orgStudentId.setErrors({notFound:!0}),yield t.pageLoaderService.close()}catch{t.isSubmitting=!1,yield t.pageLoaderService.close()}})()}onSubmit(){var t=this;return(0,d.Z)(function*(){try{const o=yield t.actionSheetController.create({cssClass:"app-action-sheet",header:`Are you sure you want to link student ${t.censoredStringPipe.transform(t.selectedStudent?.fullName)}?`,buttons:[{text:"Yes?",handler:(a=(0,d.Z)(function*(){o.dismiss(),t.save()}),function(){return a.apply(this,arguments)})},{text:"No",handler:function(){var a=(0,d.Z)(function*(){o.dismiss()});return function(){return a.apply(this,arguments)}}()}]});yield o.present()}catch(o){t.isSubmitting=!1,yield t.pageLoaderService.close(),yield t.presentAlert({header:"Try again!",message:Array.isArray(o.message)?o.message[0]:o.message,buttons:["OK"]})}var a})()}save(){var t=this;return(0,d.Z)(function*(){const o={requestedByParentId:t.currentUser.parentId,schoolId:t.selectedSchool.schoolId,studentId:t.selectedStudent.studentId};console.log(o);try{yield t.pageLoaderService.open("Sending request please wait..."),t.isSubmitting=!0,t.linkStudentRequestService.create(o).subscribe(function(){var a=(0,d.Z)(function*(c){c.success?(yield t.pageLoaderService.close(),t.isOpenRequestResultModal=!0,t.requestResultModal={title:"Success!",desc:"Request to Link Student was successfully submitted.",type:"success",done:()=>{t.isOpenRequestResultModal=!1,t.close()}}):(t.isSubmitting=!1,yield t.pageLoaderService.close(),t.isOpenRequestResultModal=!0,t.requestResultModal={title:"Oops!",desc:c.message,type:"failed",retry:()=>{t.isOpenRequestResultModal=!1}})});return function(c){return a.apply(this,arguments)}}())}catch(a){t.isSubmitting=!1,yield t.pageLoaderService.close(),yield t.presentAlert({header:"Try again!",message:Array.isArray(a.message)?a.message[0]:a.message,buttons:["OK"]})}})()}close(){this.modal.dismiss(null,"cancel")}presentAlert(t){var o=this;return(0,d.Z)(function*(){return yield(yield o.alertController.create(t)).present()})()}static \u0275fac=function(o){return new(o||T)(e.Y36(h.l),e.Y36(P.K),e.Y36(u.qu),e.Y36(p.Br),e.Y36(p.BX),e.Y36(x.p),e.Y36(m.e),e.Y36(n.S),e.Y36(g.q),e.Y36(S.e),e.Y36(p.IN),e.Y36(M.Y),e.Y36(q.V))};static \u0275cmp=e.Xpm({type:T,selectors:[["app-link-student-request"]],viewQuery:function(o,a){if(1&o&&(e.Gf(L,5),e.Gf(k,5)),2&o){let c;e.iGM(c=e.CRH())&&(a.searchSchoolCodeModal=c.first),e.iGM(c=e.CRH())&&(a.searchStudentIdModal=c.first)}},decls:36,vars:12,consts:[["no-border","","no-shadow",""],["mode","md"],["slot","start",2,"width","48px"],[1,"ion-text-center"],["slot","end"],[3,"click"],["name","close-sharp","color","primary",2,"font-size","2em!important"],["mode","md",1,"ion-padding"],[1,"request-form"],[1,"form-header"],["mode","ios","color","primary"],["mode","ios"],["button","","lines","none","detail","false",3,"click"],[2,"display","flex","flex-direction","column"],[1,"title"],["class","selected",4,"ngIf","ngIfElse"],["noSelectedSchool",""],["aria-hidden","true","name","checkmark-circle","slot","end",4,"ngIf"],["trigger","search-school-code-modal",1,"search-modal",3,"initialBreakpoint","breakpoints"],["searchSchoolCodeModal",""],["mode","ios",4,"ngIf"],[1,"search-modal",3,"initialBreakpoint","breakpoints"],["searchStudentIdModal",""],[1,"result-modal",3,"isOpen"],[4,"ngIf"],[1,"selected"],[1,"placeholder"],["aria-hidden","true","name","checkmark-circle","slot","end"],[1,"search-form"],[1,"form-field-group"],["appearance","outline"],["matInput","","type","text","placeholder","Enter School Code",3,"formControl"],["mode","md","expand","full","shape","round","size","large","color","primary",3,"disabled","click"],["class","title",4,"ngIf"],["class","selected",4,"ngIf"],["noSelectedStudent",""],["matInput","","type","text","placeholder","Enter Student Id",3,"formControl"],[1,"success-modal-content"],["name","checkmark-circle-outline","color","primary",4,"ngIf","ngIfElse"],["errorIcon",""],[1,"desc"],[1,"action"],["mode","md","expand","outline","shape","round","size","large","color","primary",3,"click",4,"ngIf","ngIfElse"],["errorAction",""],["name","checkmark-circle-outline","color","primary"],["name","checkmark-circle-outline","color","danger"],["mode","md","expand","outline","shape","round","size","large","color","primary",3,"click"],["mode","md","expand","outline","shape","round","size","large","color","danger",3,"click"]],template:function(o,a){if(1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1),e._UZ(2,"div",2)(3,"ion-title",3),e.TgZ(4,"ion-buttons",4)(5,"ion-button",5),e.NdJ("click",function(){return a.close()}),e._UZ(6,"ion-icon",6),e.qZA()()()(),e.TgZ(7,"ion-content",7)(8,"div",8)(9,"div",9)(10,"ion-card",10)(11,"ion-card-content")(12,"h1"),e._uU(13,"Request to link student?"),e.qZA()()()(),e.TgZ(14,"ion-card",11)(15,"ion-card-content")(16,"ion-item",12),e.NdJ("click",function(){return a.onShowSearchSchool()}),e.TgZ(17,"ion-label")(18,"div",13)(19,"h2",14)(20,"strong"),e._uU(21,"School Code"),e.qZA()(),e.YNc(22,O,4,1,"div",15),e.YNc(23,D,2,0,"ng-template",null,16,e.W1O),e.qZA()(),e.YNc(25,y,1,0,"ion-icon",17),e.qZA()()(),e.TgZ(26,"ion-modal",18,19),e.YNc(28,Z,9,3,"ng-template"),e.qZA(),e.YNc(29,E,14,5,"ion-card",20),e.qZA(),e.TgZ(30,"ion-modal",21,22),e.YNc(32,B,9,3,"ng-template"),e.qZA(),e.TgZ(33,"ion-modal",23),e.YNc(34,W,14,6,"ng-template"),e.qZA()(),e.YNc(35,F,4,1,"ion-footer",24)),2&o){const c=e.MAs(24);e.xp6(22),e.Q6J("ngIf",a.selectedSchool&&(null==a.selectedSchool?null:a.selectedSchool.schoolCode))("ngIfElse",c),e.xp6(3),e.Q6J("ngIf",a.selectedSchool&&(null==a.selectedSchool?null:a.selectedSchool.schoolCode)),e.xp6(1),e.Q6J("initialBreakpoint",1)("breakpoints",e.DdM(10,w)),e.xp6(3),e.Q6J("ngIf",a.selectedSchool&&(null==a.selectedSchool?null:a.selectedSchool.schoolCode)),e.xp6(1),e.Q6J("initialBreakpoint",1)("breakpoints",e.DdM(11,w)),e.xp6(3),e.Q6J("isOpen",a.isOpenRequestResultModal),e.xp6(2),e.Q6J("ngIf",a.valid)}},dependencies:[b.O5,u.Fj,u.JJ,p.YG,p.Sm,p.PM,p.FN,p.W2,p.fr,p.Gu,p.gu,p.Ie,p.Q$,p.wd,p.sr,p.ki,A.TO,A.KE,A.hX,U.Nt,u.oH,P.K],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], span[_ngcontent-%COMP%], p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin:0}ion-header[_ngcontent-%COMP%]:after{background-image:none}.request-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:20px!important}.request-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{display:flex;flex-direction:row}.request-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:100%;flex-grow:1;display:flex;font-size:2rem!important}.request-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{width:40px!important;height:40px!important;min-width:40px!important;min-height:40px!important}.request-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   ion-fab-button.close[_ngcontent-%COMP%]{--background: transparent;--color: black}.request-form[_ngcontent-%COMP%]     ion-card{margin:0!important;border-radius:20px!important;width:100%!important}.request-form[_ngcontent-%COMP%]     ion-card   ion-item::part(native){padding:0!important;background-color:transparent}.request-form[_ngcontent-%COMP%]     ion-card   ion-item .title, .request-form[_ngcontent-%COMP%]     ion-card   ion-item .placeholder{opacity:.5}.request-form[_ngcontent-%COMP%]     ion-card   ion-item ion-label{display:flex;margin:0!important;flex-direction:column;gap:5px!important;white-space:break-spaces!important}.request-form[_ngcontent-%COMP%]     ion-card   ion-item ion-label .desc{opacity:.6;font-weight:600}.request-form[_ngcontent-%COMP%]     ion-card   ion-item ion-icon{font-size:2rem;color:var(--ion-color-primary-shade)}.request-form[_ngcontent-%COMP%]     ion-card .selected{display:flex;flex-direction:column}.request-form[_ngcontent-%COMP%]   .ion-card-content[_ngcontent-%COMP%]{padding:0!important}.request-form[_ngcontent-%COMP%]   .ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:20px!important}  ion-modal h1,   ion-modal h2,   ion-modal h3,   ion-modal h4,   ion-modal h5,   ion-modal span,   ion-modal p,   ion-modal label{margin:0}  ion-modal.search-modal{--height: auto;--width: 100%}  ion-modal.search-modal .search-form{row-gap:10px;padding:20px;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}  ion-modal.search-modal .search-form .form-field-group{width:100%}  ion-modal.search-modal .search-form .form-field-group mat-form-field{width:100%}  ion-modal.search-modal .search-form .form-field-group mat-form-field .mat-error{font-size:1rem!important}  ion-modal.search-modal .search-form ion-button{width:100%!important}  ion-modal .success-modal-content{display:flex;min-height:100%;min-width:100%;flex-direction:column;justify-content:center;align-content:space-between;align-items:center;row-gap:20px!important;overflow:hidden!important;padding:30px!important}  ion-modal .success-modal-content ion-icon{font-size:8rem!important}  ion-modal .success-modal-content .title{display:flex;flex-direction:column;text-align:center}  ion-modal .success-modal-content .title h1{font-size:1.8rem}  ion-modal .success-modal-content .desc{display:flex;flex-direction:column;text-align:center}  ion-modal .success-modal-content .action{display:flex;flex-direction:column}ion-footer[_ngcontent-%COMP%]{display:flex}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{display:flex;padding:5px 10px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px;flex-grow:1;font-size:18px;width:100%;margin:0!important}"]})}},3485:(R,C,r)=>{r.r(C),r.d(C,{MyStudentsPageModule:()=>Z});var d=r(603),u=r(6895),e=r(4006),h=r(9773),P=r(5861),p=r(9664),x=r(4515),m=r(8086),n=r(4650),g=r(3013),S=r(263),M=r(7559),q=r(3746);function b(f,s){if(1&f){const i=n.EpF();n.TgZ(0,"div",17)(1,"ion-card",18)(2,"ion-card-content")(3,"ion-item",19),n.NdJ("click",function(){const E=n.CHM(i).$implicit,I=n.oxw(3);return n.KtG(I.onShowStudentDetails(E))}),n.TgZ(4,"ion-avatar",20),n._UZ(5,"img",21),n.qZA(),n.TgZ(6,"ion-label")(7,"h1")(8,"strong"),n._uU(9),n.qZA()(),n.TgZ(10,"h2",22),n._uU(11),n.qZA()()()()()()}if(2&f){const i=s.$implicit;n.xp6(5),n.MGl("alt","",i.fullName,"'s profile"),n.xp6(4),n.Oqu(i.fullName),n.xp6(2),n.Oqu("COLLEGE"===i.schoolYearLevel.educationalStage?null==i||null==i.studentCourse||null==i.studentCourse.course?null:i.studentCourse.course.name:"SENIOR"===i.schoolYearLevel.educationalStage?null==i||null==i.studentStrand||null==i.studentStrand.strand?null:i.studentStrand.strand.name:null==i||null==i.schoolYearLevel?null:i.schoolYearLevel.name)}}function A(f,s){if(1&f&&(n.ynx(0),n.YNc(1,b,12,3,"div",16),n.BQk()),2&f){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.myStudents)}}function U(f,s){if(1&f&&(n.ynx(0),n.YNc(1,A,2,1,"ng-container",11),n.BQk()),2&f){const i=n.oxw(),_=n.MAs(20);n.xp6(1),n.Q6J("ngIf",i.myStudents.length>0)("ngIfElse",_)}}function L(f,s){1&f&&(n.TgZ(0,"div",23),n._UZ(1,"ion-icon",24),n.TgZ(2,"h1"),n._uU(3,"No Student to show"),n.qZA()())}function k(f,s){1&f&&(n.TgZ(0,"div",17)(1,"ion-card",18)(2,"ion-card-content")(3,"ion-item",25)(4,"ion-avatar",20),n._UZ(5,"img",26),n.qZA(),n.TgZ(6,"ion-label")(7,"h1")(8,"strong"),n._UZ(9,"ion-skeleton-text",27),n.qZA()()()(),n.TgZ(10,"h2"),n._UZ(11,"ion-skeleton-text",28),n.qZA(),n.TgZ(12,"h2"),n._UZ(13,"ion-skeleton-text",28),n.qZA()()()()),2&f&&(n.xp6(3),n.Q6J("button",!1)("detail",!1),n.xp6(6),n.Q6J("animated",!0),n.xp6(2),n.Q6J("animated",!0),n.xp6(2),n.Q6J("animated",!0))}class O{parentsService;authService;alertController;modalCtrl;animationService;storageService;isLoading=!1;myStudents=[];ionRefresher;constructor(s,i,_,v,E,I){this.parentsService=s,this.authService=i,this.alertController=_,this.modalCtrl=v,this.animationService=E,this.storageService=I,this.isAuthenticated&&this.initStudents()}get isAuthenticated(){const s=this.storageService.getLoginUser();return s&&s?.parentCode&&s?.user&&s?.user?.userId}initStudents(){var s=this;return(0,P.Z)(function*(){s.isLoading=!0;const i=s.storageService.getLoginUser(),_=yield s.parentsService.getByCode(i.parentCode).toPromise();s.isLoading=!1,s.myStudents=_.data.parentStudents.map(v=>v.student),console.log(s.myStudents),s.ionRefresher&&s.ionRefresher.complete()})()}onShowNewRequest(){var s=this;return(0,P.Z)(function*(){s.isAuthenticated||s.authService.logout();let i=null;i=yield s.modalCtrl.create({component:p.H,cssClass:"modal-fullscreen",backdropDismiss:!1,canDismiss:!0,enterAnimation:s.animationService.flyUpAnimation,leaveAnimation:s.animationService.leaveFlyUpAnimation,componentProps:{modal:i}}),i.present()})()}onShowStudentDetails(s){var i=this;return(0,P.Z)(function*(){i.isAuthenticated||i.authService.logout();let _=null;const v=i.storageService.getLoginUser();_=yield i.modalCtrl.create({component:m.M,cssClass:"modal-fullscreen",backdropDismiss:!1,canDismiss:!0,enterAnimation:i.animationService.pushLeftAnimation,leaveAnimation:i.animationService.leavePushLeftAnimation,componentProps:{modal:_,currentUser:v,details:s}}),_.present()})()}onShowMyRequests(){var s=this;return(0,P.Z)(function*(){s.isAuthenticated||s.authService.logout();let i=null;i=yield s.modalCtrl.create({component:x.Q,cssClass:"modal-fullscreen",backdropDismiss:!1,canDismiss:!0,enterAnimation:s.animationService.flyUpAnimation,leaveAnimation:s.animationService.leaveFlyUpAnimation,componentProps:{modal:i}}),i.present()})()}doRefresh(){var s=this;return(0,P.Z)(function*(){try{if(s.isLoading)return;s.myStudents=[],yield s.initStudents()}catch{s.ionRefresher&&s.ionRefresher.complete(),yield s.presentAlert({header:"Try again!",message:"Error loading",buttons:["OK"]})}})()}presentAlert(s){var i=this;return(0,P.Z)(function*(){yield(yield i.alertController.create(s)).present()})()}static \u0275fac=function(i){return new(i||O)(n.Y36(g.l),n.Y36(S.e),n.Y36(d.Br),n.Y36(d.IN),n.Y36(M.Y),n.Y36(q.V))};static \u0275cmp=n.Xpm({type:O,selectors:[["app-my-students"]],viewQuery:function(i,_){if(1&i&&n.Gf(d.nJ,5),2&i){let v;n.iGM(v=n.CRH())&&(_.ionRefresher=v.first)}},decls:23,vars:2,consts:[["no-border","","no-shadow",""],["mode","md"],["slot","start",2,"width","48px"],[1,"ion-text-center"],["slot","end"],[3,"click"],["name","document","color","primary",2,"font-size","2rem!important"],["slot","fixed",1,"refresher-custom",3,"ionRefresh"],[1,"content"],[1,"title"],[1,"students","ion-padding"],[4,"ngIf","ngIfElse"],["slot","fixed","vertical","bottom","horizontal","end"],["name","person-add-sharp"],["noStudentTemplate",""],["loadingTemplate",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],["mode","ios",1,"student-card"],["button","","lines","none",3,"click"],["slot","start",2,"width","70px","height","70px"],["src","https://ionicframework.com/docs/img/demos/avatar.svg",3,"alt"],[1,"desc"],[1,"no-result"],["name","people-outline"],["lines","none",3,"button","detail"],["alt","temp profile","src","https://ionicframework.com/docs/img/demos/avatar.svg"],[2,"height","50px",3,"animated"],[2,"height","30px",3,"animated"]],template:function(i,_){if(1&i&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar",1),n._UZ(2,"div",2)(3,"ion-title",3),n.TgZ(4,"ion-buttons",4)(5,"ion-button",5),n.NdJ("click",function(){return _.onShowMyRequests()}),n._UZ(6,"ion-icon",6),n.qZA()()()(),n.TgZ(7,"ion-content",1)(8,"ion-refresher",7),n.NdJ("ionRefresh",function(){return _.doRefresh()}),n._UZ(9,"ion-refresher-content"),n.qZA(),n.TgZ(10,"div",8)(11,"div",9)(12,"h1"),n._uU(13,"My Students"),n.qZA()(),n.TgZ(14,"div",10),n.YNc(15,U,2,2,"ng-container",11),n.qZA()(),n.TgZ(16,"ion-fab",12)(17,"ion-fab-button",5),n.NdJ("click",function(){return _.onShowNewRequest()}),n._UZ(18,"ion-icon",13),n.qZA()(),n.YNc(19,L,4,0,"ng-template",null,14,n.W1O),n.YNc(21,k,14,5,"ng-template",null,15,n.W1O),n.qZA()),2&i){const v=n.MAs(22);n.xp6(15),n.Q6J("ngIf",!_.isLoading)("ngIfElse",v)}},dependencies:[d.BJ,d.YG,d.Sm,d.PM,d.FN,d.W2,d.IJ,d.W4,d.Gu,d.gu,d.Ie,d.Q$,d.nJ,d.Wo,d.CK,d.wd,d.sr,u.sg,u.O5],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], span[_ngcontent-%COMP%], p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin:0}ion-header[_ngcontent-%COMP%]:after{background-image:none}  ion-footer ion-toolbar   .footer-controls{width:100%;margin-right:10px}  ion-footer ion-toolbar   .profile-toolbar{box-sizing:border-box;height:48px;min-width:48px}  ion-footer ion-toolbar   .profile-toolbar ion-avatar{width:100%;height:100%}  ion-footer ion-toolbar   .profile-toolbar ion-avatar img{object-position:center;object-fit:contain;box-shadow:0 0 10px #7a7a7a75;border-radius:100%;display:flex;flex-direction:column;overflow:hidden;width:100%;height:100%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%!important}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:30px;position:sticky;top:0;z-index:99;background-color:#fff}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:2rem!important}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:30px!important;flex-grow:1}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;width:100%!important;flex-direction:column}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]     .student-card{margin:0!important;border-radius:20px!important}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]     .student-card   ion-item::part(native){padding:0!important}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]     .student-card   ion-item ion-label{display:flex;flex-direction:column;gap:5px!important;white-space:break-spaces!important}.content[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]     .student-card   ion-item ion-label .desc{-webkit-line-clamp:2;display:-webkit-box;max-width:100%;-webkit-box-orient:vertical;overflow:hidden}.content[_ngcontent-%COMP%]   .no-result[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-self:center;padding:20px;align-items:center;justify-content:center;border-radius:10px;flex-direction:column;row-gap:5px!important}.content[_ngcontent-%COMP%]   .no-result[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3rem!important}"]})}const D=[{path:"",component:O},{path:"link-student-request",loadChildren:()=>Promise.all([r.e(8592),r.e(6535)]).then(r.bind(r,6535)).then(f=>f.LinkStudentRequestPageModule)},{path:"student-details",loadChildren:()=>r.e(5553).then(r.bind(r,5553)).then(f=>f.StudentDetailsPageModule)}];class y{static \u0275fac=function(i){return new(i||y)};static \u0275mod=n.oAB({type:y});static \u0275inj=n.cJS({imports:[h.Bz.forChild(D),h.Bz]})}var N=r(5925);class Z{static \u0275fac=function(i){return new(i||Z)};static \u0275mod=n.oAB({type:Z});static \u0275inj=n.cJS({providers:[N.K],imports:[d.Pc,u.ez,e.u5,y]})}}}]);