<mat-toolbar color="#fff" class="mat-elevation-z4">
  <button [disabled]="isLoading" style="margin-right: 10px!important;" mat-icon-button
    matTooltip="{{ isReadOnly? 'Back' : 'Cancel'}}"
    [routerLink]="'/ops' + (isReadOnly ? '/school-management/' : isNew ? '/school-management/': '/school-management/' + schoolCode)">
    <mat-icon>
      {{
        isReadOnly? 'keyboard_arrow_left' : 'close'
      }}
    </mat-icon>
  </button>
  <span id="title">{{ isNew ? 'New user' : '#' + schoolCode + ' ' + ( !isLoading ? school?.schoolName : '')}}</span>
  <span class="toolbar-item-spacer"></span>
  <div class="toolbar-action">
    <button
    *ngIf="!isNew && isReadOnly"
      mat-raised-button
      color="primary"
      matTooltip="Delete"
      (click)="onDelete()">
      Delete
    </button>
    <button
    *ngIf="!isNew && isReadOnly"
      mat-raised-button
      color="primary"
      matTooltip="Edit"
      routerLink="/ops/school-management/{{schoolCode}}/edit"
      replaceUrl="true"
    >
      Edit
    </button>
    <button
      *ngIf="!isReadOnly"
      mat-raised-button
      color="primary"
      matTooltip="{{isNew ? 'Save' : 'Update'}}"
      [disabled]="!formIsReady && !formIsValid"
      form="schoolForm"
      type="submit">
      {{isNew ? 'Save' : 'Update'}}
    </button>
  </div>
</mat-toolbar>
<div class="content">
  <div class="inner-content">
    <mat-card>
      <mat-card-content>
        <div fxFlex="100" class="content-inner" fxLayout="column">
          <form
            [formGroup]="schoolForm"
            fxLayout="row wrap"
            id="schoolForm"
            (ngSubmit)="onSubmit()"
            [ngClass]="{'readonly' : isReadOnly}"
          >
            <fieldset fxFlex="100" fxLayout="row wrap" style="row-gap: 16px">
              <h4 class="inner-content-title">School Information</h4>
              <div
                fxFlex="100"
                fxLayout="column"
                fxLayout.gt-sm="row"
                style="gap: 16px"
              >
                <mat-form-field
                  appearance="outline"
                  fxFlex="33.33%"
                  class="cell"
                  [ngClass.gt-sm]="{ isLargeScreen: true }"
                >
                  <mat-label>School code</mat-label>
                  <input
                    matInput
                    placeholder="School code"
                    formControlName="orgSchoolCode"
                  />
                  <mat-error
                    *ngIf="getError('orgSchoolCode') !== (null || undefined)"
                    >{{
                      (getError("orgSchoolCode") &&
                      getError("orgSchoolCode")["required"]
                        ? "Please enter school code"
                        : "")
                    }}</mat-error
                  >
                </mat-form-field>
              </div>
              <div
                fxFlex="100"
                fxLayout="column"
                fxLayout.gt-sm="row"
                style="gap: 16px"
              >
                <mat-form-field
                  appearance="outline"
                  fxFlex="100"
                  class="cell"
                  [ngClass.gt-sm]="{ isLargeScreen: true }"
                >
                  <mat-label>School name</mat-label>
                  <input
                    matInput
                    placeholder="School name"
                    formControlName="schoolName"
                  />
                  <mat-error
                    *ngIf="getError('schoolName') !== (null || undefined)"
                    >{{
                      (getError("schoolName") &&
                      getError("schoolName")["required"]
                        ? "Please enter school name"
                        : "") ||
                        (getError("schoolName") &&
                        getError("schoolName")["pattern"]
                          ? "Invalid input"
                          : "")
                    }}</mat-error
                  >
                </mat-form-field>
              </div>
              <div
                fxFlex="100"
                fxLayout="column"
                fxLayout.gt-sm="row"
                style="gap: 16px"
              >
                <mat-form-field
                  appearance="outline"
                  fxFlex="100"
                  class="cell"
                  [ngClass.gt-sm]="{ isLargeScreen: true }"
                  class="readonly"
                >
                <mat-label>Address</mat-label>
                <textarea
                  matInput
                  placeholder="Address"
                  formControlName="schoolAddress">
                </textarea>
                  <mat-error
                    *ngIf="getError('schoolAddress') !== (null || undefined)"
                    >{{
                      (getError("schoolAddress") && getError("schoolAddress").required
                        ? "Please enter address"
                        : "")}}</mat-error
                  >
                </mat-form-field>
              </div>
              <div
                fxFlex="100"
                fxLayout="column"
                fxLayout.gt-sm="row"
                style="gap: 16px"
              >
                <mat-form-field
                  appearance="outline"
                  fxFlex="50%"
                  class="cell"
                  [ngClass.gt-sm]="{ isLargeScreen: true }"
                >
                  <mat-label>Contact Number</mat-label>
                  <input
                    matInput
                    placeholder="Contact Number"
                    formControlName="schoolContactNumber"
                  />
                  <mat-error
                    *ngIf="getError('schoolContactNumber') !== (null || undefined)"
                    >{{
                      (getError("schoolContactNumber") &&
                      getError("schoolContactNumber").required
                        ? "Please enter Contact Number"
                        : "")
                    }}</mat-error
                  >
                </mat-form-field>
                <mat-form-field
                  appearance="outline"
                  fxFlex="50%"
                  class="cell"
                  [ngClass.gt-sm]="{ isLargeScreen: true }"
                >
                  <mat-label>School Email</mat-label>
                  <input
                    matInput
                    placeholder="School Email"
                    type="email"
                    formControlName="schoolEmail"
                    autocomplete="new-email"
                  />
                  <mat-error
                    *ngIf="getError('schoolEmail') !== (null || undefined)"
                    >{{
                      (getError("schoolEmail") &&
                      getError("schoolEmail").required
                        ? "Please enter email"
                        : "") ||
                        (getError("schoolEmail") &&
                        getError("schoolEmail").email
                          ? "Please enter a valid email"
                          : "") ||
                        (getError("schoolEmail") && getError("schoolEmail").pattern
                        ? "Please enter a valid email"
                        : "")
                    }}</mat-error
                  >
                </mat-form-field>
              </div>
              <div
                fxFlex="100"
                fxLayout="column"
                fxLayout.gt-sm="row"
                style="gap: 16px">
                <mat-form-field
                  appearance="outline"
                  fxFlex="33.33%"
                  class="cell"
                  [ngClass.gt-sm]="{ isLargeScreen: true }"
                >
                  <mat-label>Time Before Swipe Is Allowed</mat-label>
                  <input
                    matInput
                    placeholder="Time Before Swipe Is Allowed"
                    formControlName="timeBeforeSwipeIsAllowed"
                  />
                  <mat-error
                    *ngIf="getError('timeBeforeSwipeIsAllowed') !== (null || undefined)"
                    >{{
                      (getError("timeBeforeSwipeIsAllowed") &&
                      getError("timeBeforeSwipeIsAllowed").required
                        ? "Field is required"
                        : "")
                    }}</mat-error
                  >
                </mat-form-field>
                <mat-form-field
                  appearance="outline"
                  fxFlex="33.33%"
                  class="cell"
                  [ngClass.gt-sm]="{ isLargeScreen: true }"
                >
                  <mat-label>SMS Notification For Staff Entry</mat-label>
                  <input
                    matInput
                    placeholder="SMS Notification For Staff Entry"
                    formControlName="smsNotificationForStaffEntry"
                  />
                  <mat-error
                    *ngIf="getError('smsNotificationForStaffEntry') !== (null || undefined)"
                    >{{
                      (getError("smsNotificationForStaffEntry") &&
                      getError("smsNotificationForStaffEntry").required
                        ? "Field is required"
                        : "")
                    }}</mat-error
                  >
                </mat-form-field>
                <mat-form-field
                  appearance="outline"
                  fxFlex="33.33%"
                  class="cell"
                  [ngClass.gt-sm]="{ isLargeScreen: true }"
                >
                  <mat-label>SMS Notification For Student Break Time</mat-label>
                  <input
                    matInput
                    placeholder="SMS Notification For Student Break Time"
                    formControlName="smsNotificationForStudentBreakTime"
                  />
                  <mat-error
                    *ngIf="getError('smsNotificationForStudentBreakTime') !== (null || undefined)"
                    >{{
                      (getError("smsNotificationForStudentBreakTime") &&
                      getError("smsNotificationForStudentBreakTime").required
                        ? "Field is required"
                        : "")
                    }}</mat-error
                  >
                </mat-form-field>
              </div>
              <h4>Student Settings</h4>
              <div
                fxFlex="100"
                fxLayout="column"
                fxLayout.gt-sm="row"
                style="gap: 16px">
                <mat-form-field
                  appearance="outline"
                  fxFlex="33.33%">
                  <mat-label>Students Allowable Time Late</mat-label>
                  <input
                    matInput
                    placeholder="Students Allowable Time Late"
                    formControlName="studentsAllowableTimeLate"/>
                    <mat-error *ngIf="getError('studentsAllowableTimeLate') !== (null || undefined)">{{
                      (getError("studentsAllowableTimeLate") &&
                      getError("studentsAllowableTimeLate").required
                        ? "Field is required"
                        : "")
                    }}
                    </mat-error>
                </mat-form-field>
                <mat-form-field
                  appearance="outline"
                  fxFlex="33.33%">
                  <mat-label>Students Time Late</mat-label>
                  <input
                    matInput
                    placeholder="Students Time Late"
                    formControlName="studentsTimeLate"/>
                    <mat-error *ngIf="getError('studentsTimeLate') !== (null || undefined)">{{
                      (getError("studentsTimeLate") &&
                      getError("studentsTimeLate").required
                        ? "Field is required"
                        : "")
                    }}
                    </mat-error>
                </mat-form-field>
                <div
                  width="33.33%">
                </div>
              </div>
              <div
                fxFlex="100"
                fxLayout="column"
                fxLayout.gt-sm="row">
                <div
                  width="33.33%">
                  <mat-checkbox
                    matTooltip=""
                    formControlName="restrictGuardianTime">
                    Restrict Guardian Time
                  </mat-checkbox>
                </div>
                <div
                  width="33.33%">
                </div>
                <div
                  width="33.33%">
                </div>
              </div>
              <h4>Employee Settings</h4>
              <div
                fxFlex="100"
                fxLayout="column"
                fxLayout.gt-sm="row"
                style="gap: 16px">
                <mat-form-field
                  appearance="outline"
                  fxFlex="33.33%">
                  <mat-label>Employees Time Before Swipe is Allowed</mat-label>
                  <input
                    matInput
                    placeholder="Employees Time Before Swipe is Allowed"
                    formControlName="employeesTimeBeforeSwipeIsAllowed"/>
                    <mat-error *ngIf="getError('employeesTimeBeforeSwipeIsAllowed') !== (null || undefined)">{{
                      (getError("employeesTimeBeforeSwipeIsAllowed") &&
                      getError("employeesTimeBeforeSwipeIsAllowed").required
                        ? "Field is required"
                        : "")
                    }}
                    </mat-error>
                </mat-form-field>
                <mat-form-field
                  appearance="outline"
                  fxFlex="33.33%">
                  <mat-label>Employees Allowable Time Late</mat-label>
                  <input
                    matInput
                    placeholder="Employees Allowable Time Late"
                    formControlName="employeesAllowableTimeLate"/>
                    <mat-error *ngIf="getError('employeesAllowableTimeLate') !== (null || undefined)">{{
                      (getError("employeesAllowableTimeLate") &&
                      getError("employeesAllowableTimeLate").required
                        ? "Field is required"
                        : "")
                    }}
                    </mat-error>
                </mat-form-field>
                <mat-form-field
                  appearance="outline"
                  fxFlex="33.33%">
                  <mat-label>Employees Time Late</mat-label>
                  <input
                    matInput
                    placeholder="Employees Time Late"
                    formControlName="employeesTimeLate"/>
                    <mat-error *ngIf="getError('employeesTimeLate') !== (null || undefined)">{{
                      (getError("employeesTimeLate") &&
                      getError("employeesTimeLate").required
                        ? "Field is required"
                        : "")
                    }}
                    </mat-error>
                </mat-form-field>
              </div>
            </fieldset>
          </form>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
